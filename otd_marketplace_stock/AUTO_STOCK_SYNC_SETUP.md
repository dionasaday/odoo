# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Auto Stock Sync ‡∏à‡∏≤‡∏Å Zortout ‡∏ó‡∏∏‡∏Å 10 ‡∏ô‡∏≤‡∏ó‡∏µ

## üìã ‡∏™‡∏£‡∏∏‡∏õ

‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ **Scheduled Action** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö sync stock ‡∏à‡∏≤‡∏Å Zortout ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å **10 ‡∏ô‡∏≤‡∏ó‡∏µ** ‡πÅ‡∏•‡πâ‡∏ß

## üîÑ Scheduled Action ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ

### 1. Marketplace: Sync Stock from Zortout (Auto)

- **Name**: `Marketplace: Sync Stock from Zortout (Auto)`
- **Model**: `marketplace.account`
- **Interval**: `10 minutes`
- **Status**: `Active` (‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)

### 2. ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

‡∏ó‡∏∏‡∏Å 10 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞:
1. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Zortout accounts ‡∏ó‡∏µ‡πà:
   - `channel = 'zortout'`
   - `active = True`
   - `sync_enabled = True`
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Job ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö sync stock:
   - Job Type: `sync_stock_from_zortout`
   - Warehouse Code: ‡∏à‡∏≤‡∏Å `stock_location_id` (‡∏´‡∏£‡∏∑‡∏≠ sync ‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å warehouse)
   - SKU List: ‡∏ß‡πà‡∏≤‡∏á (sync ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
3. Job ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÇ‡∏î‡∏¢ cron job "Marketplace: Run Jobs" (‡∏ó‡∏∏‡∏Å 1 ‡∏ô‡∏≤‡∏ó‡∏µ)

## ‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Scheduled Action

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Settings** > **Technical** > **Automation** > **Scheduled Actions**
2. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "Marketplace: Sync Stock from Zortout (Auto)"
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤:
   - ‚úÖ **Active** ‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
   - ‚úÖ **Interval Number**: 10
   - ‚úÖ **Interval Type**: minutes

### ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Interval

‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô:

1. ‡πÄ‡∏õ‡∏¥‡∏î Scheduled Action "Marketplace: Sync Stock from Zortout (Auto)"
2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:
   - **Interval Number**: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡πÄ‡∏ä‡πà‡∏ô 5, 15, 30)
   - **Interval Type**: minutes
3. **Save**

### ‡∏õ‡∏¥‡∏î/‡πÄ‡∏õ‡∏¥‡∏î Auto Sync

- **‡∏õ‡∏¥‡∏î**: ‡πÄ‡∏≠‡∏≤ checkmark ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å **Active**
- **‡πÄ‡∏õ‡∏¥‡∏î**: ‡πÉ‡∏™‡πà checkmark ‡πÉ‡∏ô **Active**

## üìä ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Jobs

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Marketplace** > **Jobs**
2. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Jobs ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠ "Sync Stock from Zortout - Zortout (Auto)"
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
   - **State**: ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô `Done` (‡∏ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)
   - **Result**: ‡∏î‡∏π‡∏à‡∏≥‡∏ô‡∏ß‡∏ô products ‡∏ó‡∏µ‡πà sync ‡πÅ‡∏•‡∏∞ stock ‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó
   - **Started At**: ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏ó‡∏∏‡∏Å 10 ‡∏ô‡∏≤‡∏ó‡∏µ

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Stock

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Inventory** > **Products**
2. ‡πÄ‡∏õ‡∏¥‡∏î product ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö **Quantity On Hand** ‡∏Ñ‡∏ß‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ó‡∏∏‡∏Å 10 ‡∏ô‡∏≤‡∏ó‡∏µ

## üîç Troubleshooting

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Jobs ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
1. Scheduled Action **Active** ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. Zortout Account ‡∏°‡∏µ `sync_enabled = True` ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logs:
   ```bash
   docker compose logs odoo | grep -i "sync stock.*auto"
   ```

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Jobs ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
1. Cron Job "Marketplace: Run Jobs" **Active** ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. Jobs ‡∏°‡∏µ **State** = `Pending` ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logs:
   ```bash
   docker compose logs odoo | grep -i "cron_run_jobs"
   ```

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Stock ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
1. Job **State** = `Done` ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. Job **Result** ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô stocks_updated ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ product ‡∏°‡∏µ SKU ‡πÅ‡∏•‡∏∞ Track Inventory ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Company ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

## üí° Tips

1. **Interval ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°**:
   - 10 ‡∏ô‡∏≤‡∏ó‡∏µ: ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö realtime sync
   - 5 ‡∏ô‡∏≤‡∏ó‡∏µ: sync ‡∏ö‡πà‡∏≠‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô (‡∏≠‡∏≤‡∏à‡πÄ‡∏û‡∏¥‡πà‡∏° load)
   - 15-30 ‡∏ô‡∏≤‡∏ó‡∏µ: sync ‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á (‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ realtime)

2. **Monitor Logs**:
   ```bash
   # Monitor stock sync logs
   ./addons/otd_marketplace_stock/monitor_stock_sync.sh
   ```

3. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Job History**:
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Marketplace** > **Jobs**
   - Filter: `Job Type = Sync Stock from Zortout`
   - ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° **Started At** (‡πÉ‡∏´‡∏°‡πà‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô)

## üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

- Scheduled Action ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Job ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å 10 ‡∏ô‡∏≤‡∏ó‡∏µ
- Job ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÇ‡∏î‡∏¢ cron job "Marketplace: Run Jobs" (‡∏ó‡∏∏‡∏Å 1 ‡∏ô‡∏≤‡∏ó‡∏µ)
- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ Job ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÉ‡∏ô queue, ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö
- Stock ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ `action_apply_inventory()` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ quantity ‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó

